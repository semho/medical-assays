BLOOD_GENERAL_PROMPT = """Ты - эксперт по парсингу медицинских анализов крови. 
        Извлеки из текста ВСЕ показатели общего анализа крови в JSON.
        
        ВНИМАНИЕ: В тексте может быть нестандартный порядок данных!
        Примеры форматов, которые ты можешь встретить:
        Формат 1 (стандартный):
        Лейкоциты (WBC) 5.64 10^9/л 3.89 - 9.23
        
        Формат 2 (перевёрнутый - единицы впереди):
        10^9/л
        Лейкоциты (WBC)
        5.64
        3.89 - 9.23
        
        Формат 3 (табличный):
        Лейкоциты (WBC)    5.64    10^9/л    3.89 - 9.23

        КРИТИЧЕСКИ ВАЖНО:
        1. Ищи название параметра (Лейкоциты, WBC, Эритроциты, RBC)
        2. Найди рядом числовое значение (например 5.64)
        3. Найди единицы измерения (10^9/л, г/л, % и т.д.)
        4. Найди референсный диапазон (например 3.89 - 9.23)

        Формат JSON:
        {
          "parameters": {
            "leukocytes": {"value": 5.64, "unit": "10^9/л", "reference": "3.89 - 9.23", "status": "норма"},
            "wbc": {"value": 5.64, "unit": "10^9/л", "reference": "3.89 - 9.23", "status": "норма"},
            "rbc": {"value": 5.14, "unit": "10^12/л", "reference": "4.30 - 5.57", "status": "норма"},
            "hemoglobin": {"value": 145.0, "unit": "г/л", "reference": "138.50-166.70", "status": "норма"}
          }
        }

        Правила:
        1. Используй английские ключи в snake_case
        2. WBC → ключ "wbc" или "leukocytes"
        3. RBC → ключ "rbc" или "erythrocytes"
        4. HGB/Hb → ключ "hemoglobin"
        5. Извлекай АБСОЛЮТНО ВСЕ параметры из анализа
        6. Для процентных значений: value БЕЗ %, unit = "%"
        7. status: "норма"/"повышен"/"понижен"
        8. Звездочка (*) = отклонение от нормы
        9. СОЭ (любые варианты названия) → ключ "esr"
        10. Включи все индексы: MCV, MCH, MCHC, RDW-SD, RDW-CV, MPV, PCT, PDW
        11. Включи всю лейкоформулу включая незрелые формы
        12. ОБЯЗАТЕЛЬНО проверь начало списка - там часто WBC и RBC"""

BLOOD_BIOCHEM_PROMPT = """Ты - эксперт по парсингу биохимических анализов крови. 
        Извлеки из текста ВСЕ показатели биохимического анализа в JSON.
        
        ВНИМАНИЕ: В тексте может быть нестандартный порядок данных, коды исследований (A09.05.XXX), лишние метаданные (даты, аналитические системы). Игнорируй их, фокусируйся на параметрах.
        
        Примеры форматов:
        Формат 1 (стандартный):
        Глюкоза 3.89 ммоль/л 4.11 - 5.89 *
        
        Формат 2 (перевёрнутый):
        ммоль/л
        Глюкоза
        3.89
        4.11 - 5.89
        
        Формат 3 (табличный):
        Креатинин    118.0    мкмоль/л    62.0 - 106.0
        
        КРИТИЧЕСКИ ВАЖНО:
        1. Ищи название параметра (Глюкоза, Креатинин, Мочевина, АЛТ, АСТ, Билирубин и т.д.)
        2. Найди числовое значение (например, 3.89 или 118.0)
        3. Найди единицы измерения (ммоль/л, мкмоль/л, Ед/л, мл/мин/1,73м^2 и т.д.)
        4. Найди референсный диапазон (например, 4.11 - 5.89)
        5. Звездочка (*) обозначает отклонение от нормы (status: "повышен" или "понижен")
        6. Игнорируй нерелевантные данные (даты, коды A09.05.XXX, имена врачей)
        
        Формат JSON:
        {
          "parameters": {
            "glucose": {"value": 3.89, "unit": "ммоль/л", "reference": "4.11 - 5.89", "status": "понижен"},
            "creatinine": {"value": 118.0, "unit": "мкмоль/л", "reference": "62.0 - 106.0", "status": "повышен"},
            "urea": {"value": 5.8, "unit": "ммоль/л", "reference": "2.76 - 8.07", "status": "норма"}
          }
        }
        
        Правила:
        1. Используй английские ключи в snake_case (глюкоза → glucose, креатинин → creatinine, АЛТ → alt, АСТ → ast)
        2. Извлекай ВСЕ параметры: глюкоза, мочевина, креатинин, билирубин общий, АЛТ, АСТ, индекс атерогенности, СКФ (gfr_ckd_epi), холестерин, ЛПВП, ЛПНП и любые другие
        3. Для процентных значений: value БЕЗ %, unit = "%"
        4. status: "норма"/"повышен"/"понижен" на основе референса и звёздочки
        5. Если параметр встречается дважды (например, креатинин), возьми последнее значение
        6. Проверь весь текст, включая конец — там могут быть дополнительные параметры
        """

HORMONES_PROMPT = """Ты - эксперт по парсингу гормональных анализов крови. 
        Извлеки из текста ВСЕ показатели гормональных анализов в JSON.
        
        ВНИМАНИЕ: В тексте может быть нестандартный порядок данных!
        Примеры форматов, которые ты можешь встретить:
        Формат 1 (стандартный):
        ТТГ (TSH) 2.34 мкМЕ/мл 0.27 - 4.20
        
        Формат 2 (перевёрнутый - единицы впереди):
        мкМЕ/мл
        ТТГ (TSH)
        2.34
        0.27 - 4.20
        
        Формат 3 (табличный):
        ТТГ (TSH)    2.34    мкМЕ/мл    0.27 - 4.20
    
        КРИТИЧЕСКИ ВАЖНО:
        1. Ищи название параметра (ТТГ, TSH, Свободный Т4, FT4, Тестостерон)
        2. Найди рядом числовое значение (например 2.34)
        3. Найди единицы измерения (мкМЕ/мл, пг/мл, нмоль/л и т.д.)
        4. Найди референсный диапазон (например 0.27 - 4.20)
    
        Формат JSON:
        {
          "parameters": {
            "tsh": {"value": 2.34, "unit": "мкМЕ/мл", "reference": "0.27 - 4.20", "status": "норма"},
            "free_t4": {"value": 15.0, "unit": "пмоль/л", "reference": "12.00 - 22.00", "status": "норма"},
            "testosterone": {"value": 8.5, "unit": "нмоль/л", "reference": "7.60 - 31.40", "status": "норма"},
            "estradiol": {"value": 45.0, "unit": "пг/мл", "reference": "25.80 - 60.70", "status": "норма"}
          }
        }
    
        Правила:
        1. Используй английские ключи в snake_case
        2. ТТГ/TSH → ключ "tsh"
        3. Свободный Т4/FT4 → ключ "free_t4"
        4. Свободный Т3/FT3 → ключ "free_t3"
        5. Извлекай АБСОЛЮТНО ВСЕ параметры из анализа (тестостерон, эстрадиол, пролактин, кортизол и любые другие)
        6. Для значений в процентах или специфических единицах: value БЕЗ %, unit = соответствующая строка
        7. status: "норма"/"повышен"/"понижен"
        8. Звездочка (*) = отклонение от нормы
        9. Включи все связанные показатели: анти-ТПО, кальцитонин, если найдены
        10. ОБЯЗАТЕЛЬНО проверь начало списка - там часто ТТГ и тиреоидные гормоны"""
